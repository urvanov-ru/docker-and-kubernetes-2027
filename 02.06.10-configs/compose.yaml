services:
  httpd:
    # Используем образ Apache HTTP Server версии 2.4.65
    image: httpd:2.4.65
    ports:
      # Проброс порта 80 из контейнера Nginx
      # на порт 8080 хоста.
      - "8080:80"
    volumes:
      # SHTML-файлы сайта.
      - ./public-html:/usr/local/apache2/htdocs/
    configs:
      # Имя конфига из корневого элемента configs.
      - source: ssi_config 
      # Путь к конфигурационному файлу Nginx.
        target: /usr/local/apache2/conf/httpd.conf
# Корневой элемент configs, содержащий конфигурационные файлы
# использующиеся сервисами.
configs:
  # Описание конфигурационных файлов.
  # ключ - имя конфига. 
  ssi_config:
    # Путь к конфигурационному файлу Nginx.
    # Конфигурационный файл ssi-enabled-httpd.conf находится
    # в том же каталоге, что и compose.yaml.
    # Он содержит настройки включения SSI в Apache HTTP Server.
    file: ./ssi-enabled-httpd.conf